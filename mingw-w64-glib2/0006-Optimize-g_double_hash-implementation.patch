From ca55d3c6d796915e3c011275f5b0f5d4b56f5d69 Mon Sep 17 00:00:00 2001
From: wszqkzqk <wszqkzqk@qq.com>
Date: Mon, 26 Sep 2022 08:26:27 +0800
Subject: [PATCH 1/2] Optimize g_double_hash implementation

---
 glib/ghash.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/glib/ghash.c b/glib/ghash.c
index 5fb722c04..4077ad374 100644
--- a/glib/ghash.c
+++ b/glib/ghash.c
@@ -2531,5 +2531,5 @@ g_double_equal (gconstpointer v1,
 guint
 g_double_hash (gconstpointer v)
 {
-  return (guint) *(const gdouble*) v;
+  return (guint) ((const guint) (*(guint64*) v >> 32)) ^ (*(const guint*) v);
 }
-- 
2.38.0.windows.1

