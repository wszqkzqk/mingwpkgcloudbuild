From cf54db59813970eca91773713ddb67b1d94a69ee Mon Sep 17 00:00:00 2001
From: Rico Tzschichholz <ricotz@ubuntu.com>
Date: Tue, 9 Aug 2022 23:07:45 +0200
Subject: [PATCH 3/5] gtk4: Make Gtk.show_uri_full() an instance method of
 Gtk.Window

Fixes https://gitlab.gnome.org/GNOME/vala/issues/1347
---
 vapi/gtk4.vapi                 | 4 ++--
 vapi/metadata/Gtk-4.0.metadata | 2 ++
 2 files changed, 4 insertions(+), 2 deletions(-)

diff --git a/vapi/gtk4.vapi b/vapi/gtk4.vapi
index 9cdd79f48..d5d29967f 100644
--- a/vapi/gtk4.vapi
+++ b/vapi/gtk4.vapi
@@ -12534,6 +12534,8 @@ namespace Gtk {
 		public void set_title (string? title);
 		public void set_titlebar (Gtk.Widget? titlebar);
 		public void set_transient_for (Gtk.Window? parent);
+		[CCode (cheader_filename = "gtk/gtk.h", cname = "gtk_show_uri_full", finish_name = "gtk_show_uri_full_finish")]
+		public async bool show_uri_full (string uri, uint32 timestamp, GLib.Cancellable? cancellable) throws GLib.Error;
 		public void unfullscreen ();
 		public void unmaximize ();
 		public void unminimize ();
@@ -14550,8 +14552,6 @@ namespace Gtk {
 	[CCode (cheader_filename = "gtk/gtk.h")]
 	public static void show_uri (Gtk.Window? parent, string uri, uint32 timestamp);
 	[CCode (cheader_filename = "gtk/gtk.h")]
-	public static async bool show_uri_full (Gtk.Window? parent, string uri, uint32 timestamp, GLib.Cancellable? cancellable) throws GLib.Error;
-	[CCode (cheader_filename = "gtk/gtk.h")]
 	public static void test_accessible_assertion_message_role (string domain, string file, int line, string func, string expr, Gtk.Accessible accessible, Gtk.AccessibleRole expected_role, Gtk.AccessibleRole actual_role);
 	[CCode (cheader_filename = "gtk/gtk.h")]
 	public static bool test_accessible_has_property (Gtk.Accessible accessible, Gtk.AccessibleProperty property);
diff --git a/vapi/metadata/Gtk-4.0.metadata b/vapi/metadata/Gtk-4.0.metadata
index 1d81ecfc9..cc2cf65f7 100644
--- a/vapi/metadata/Gtk-4.0.metadata
+++ b/vapi/metadata/Gtk-4.0.metadata
@@ -340,6 +340,8 @@ TreeModel
   .get_value return_void
   .rows_reordered skip
 show_about_dialog skip=false
+show_uri_full parent="Gtk.Window" symbol_type="method" instance_idx=0 finish_name="gtk_show_uri_full_finish"
+show_uri_full_finish parent="Gtk.Window" symbol_type="method" instance_idx=0
 test_init skip=false
 
 test_init.argvp unowned
-- 
2.38.0.windows.1

